<!DOCTYPE html>
<html>
<head>
    <title>Office Remote</title>
    <meta name = "viewport" content = "user-scalable = no">
    <script src="Scripts/jquery-1.9.1.min.js"></script>
    <script src="Scripts/hammer.js"></script>
    <script src="Scripts/jquery.specialevent.hammer.js"></script>
    <style>
        #swipeme {
            border: 3px dashed orange;
            line-height: 500px;
            height: 100%;
            text-align: center;
            font-size: 3em;
            width: 100%;
        }
    </style>
</head>
<body>
    <div id="swipeme">
        Touch me :)
    </div>
    <div id="output">
    </div>
    <script>
        (function ($) {
            // alert(window.location.hostname);

            // send connect message
            //$.ajax({
            //    url: "http://" + window.location.hostname + ":59256/Handlers/OfficeRemoteProxy.ashx"
            //});

            document.ontouchmove = function (event) {
                event.preventDefault();
            }

            var $sw = $('#swipeme'),
                $output = $('#output');

            var prevDistanceX = 0;
            var prevDistanceY = 0;
            // hold tap swipe doubletap transformstart transform transformend dragstart drag dragend release
            $sw.on('hold tap swipe doubletap dragstart drag dragend', function (event) {
                event.preventDefault();

                var offsetX = (event.distanceX - prevDistanceX);
                var offsetY = (event.distanceY - prevDistanceY) * 3;

                var myType = event.type;
                var clicks = 1;
                var skip = false;

                //if (myType == "drag") {
                //    myType = "pan"
                    // if (Math.abs(offsetX) < 2 && (event.direction == 'left' || event.direction == 'right'))
                    //     skip = true;
                    // if (Math.abs(offsetY) < 2 && (event.direction == 'up' || event.direction == 'down'))
                    //     skip = true;
                //}
                //else if (myType == "release")
                //    myType = "touchup";
                //else if (myType == "hold")
                //    myType = "press";
                //else if (myType == "doubletap") {
                //    myType = "tap";
                //    clicks = 2;
                //}

                if (!skip)
                    $.ajax({
                        url: "http://" + window.location.hostname + ":59256/Handlers/OfficeRemoteProxy.ashx",
                        data: {
                            type: myType,
                            touches: event.touches.length,
                            clicks: clicks,
                            direction: event.direction,
                            offset_x: offsetX,
                            offset_y: offsetY
                        }
                    });

                $output.prepend("Type: " + event.type + ", Fingers: " + event.touches.length + ", Direction: " + event.direction + ", Offset: " + offsetX + "," + offsetY + "<br/>");

                prevDistanceX = event.distanceX;
                prevDistanceY = event.distanceY;
            });

            // this is how you unbind an event
            /*$sw.on('swipe', function (event) {
                event.preventDefault();

                $sw.off('tap');
            });*/
        }(jQuery));
    </script>
</body>
</html>